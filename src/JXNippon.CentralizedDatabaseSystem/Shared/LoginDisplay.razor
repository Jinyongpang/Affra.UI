@using JXNippon.CentralizedDatabaseSystem.Shared.Notifications
@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@using System.Security.Claims

@inject NavigationManager Navigation
@inject SignOutSessionStateManager SignOutManager

<AuthorizeView>
    <Authorized>
        <Space>
            <SpaceItem>
                <div class="align-self-center flex-row order-md-first">
                    <div class="nav-item dropdown d-lg-none d-xl-flex me-3">
                        <Search Placeholder="Search" ClassicSearchIcon/>
                    </div>
                </div>               
            </SpaceItem>
            <SpaceItem>
                <PersonalMessageIcon/>
            </SpaceItem>
        </Space>
        <RadzenProfileMenu>
            <Template>
                <Avatar Style="vertical-align: middle;" Size="large">
                    <span style="font-size: 16px;">@this._userService.GetAvatarName(context.User.Identity.Name)</span>
                </Avatar>
            </Template>
            <ChildContent>
                <Card Size="large" Style="min-width:380px;">
                    <TitleTemplate>

                    </TitleTemplate>
                    <Extra>
                        <a @onclick="BeginLogout"><span class="toprow-nav-title">Logout</span></a>
                    </Extra>
                    <Body>
                        <div class="row min-w-100">
                            <div class="col">
                                 <Avatar Style="vertical-align: middle;" Size="64">
                                    <span style="font-size: 32px;">@this._userService.GetAvatarName(context.User.Identity.Name)</span>
                                 </Avatar>
                            </div>
                            <div class="col">
                                <div class="row">
                                    <h3 style="font-weight:bold">@context.User.Identity.Name</h3>
                                </div>
                                <div class="row">
                                    <span>@this._userService.GetEmail(@context.User)</span>
                                </div>
                            </div>
                        </div> 
                    </Body>
                </Card>
            </ChildContent>
        </RadzenProfileMenu>
    </Authorized>
</AuthorizeView>